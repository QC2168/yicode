# 快速体验

## 环境

这个不多说，不会的请查资料或联系作者（需要作者协助请查看前文咨询费一节）。

1. 请准备好 `nodejs` 环境，版本 `v16+`
    1. 请准备好 `pnpm` 包管理工具
    2. 请准备好 `nodemon` 开发环境启动和监控工具
2. 请准备好 `mysql` 环境，版本 `v5.7+`
    1. 可以使用 `phpenv` 集成环境
3. 请准备好 `redis` 环境，版本 `v5+`
    1. windows 版本下载地址

## 安装

本项目强制使用 `pnpm` 作为 `nodejs` 包管理工具，版本不低于 `v7+`。

如未安装，请使用如下命令全局安装，否则将无法运行项目。

```bash
npm install -g pnpm
```

全局安装开发环境下的自动重启工具 `nodemon`。

```bash
npm install -g nodemon
```

点击查看 [下载帮助](https://yicode.tech/3-关于/2-资源下载/1-下载中心.html) 文档，下载 `yiapi-template` 项目开发模板。

## **注意** 关于 `yiapi` 和 `yiapi-template` 的关系

> `yiapi` 相当于前端界的 `vue.js`，是一个接口开发 `框架`。
>
> 我们开发 `vue` 项目，是需要创建一个基于 `vue.js` 的项目，把 `vue` 引入进去使用。
>
> 所以，`yiapi` 不是独立使用的，随易科技官方给大家提供了使用 `yiapi-template` 接口开发项目模板，你下载下来，就能马上使用。

![picture 0](https://static.yicode.tech/images/202311/20231126003213.png)

下载后的项目结构，未注释说明的部分为代码格式化、提交忽略文件等，不用管。

```bash
├───📁 apis #接口目录
│   └───📁 news
│       └───...
├───📁 env # 环境变量目录
│   └───📄 .env.development # 开发配置
│   └───📄 .env.production # 正式配置
├───📁 public # 文件上传资源目录，可被直接访问
│   ├───📁 2023
│   │   └───...
│   └───📄 .gitkeep
├───📁 plugins # 插件定义目录
├───📁 tables # 数据库表定义目录
│   └───📄 user.json # 用户表
│   └───📄 order.json # 订单表
├───📄 .gitignore
├───📄 .prettierrc
├───📄 appConfig.js # 项目配置文件
├───📄 nodemon.json # 开发环境启动配置
├───📄 package.json
├───📄 pm2.config.cjs # 正式环境启动配置
├───📄 README.md
├───📄 syncDatabase.js # 数据库表同步脚本
└───📄 yiapi.js # 项目启动文件
```

下载完毕后，执行 `pnpm install` 命令，安装项目依赖。

## 体验

```bash
# env/.env.development 文件
# 数据库配置
YIAPI_DB_HOST="127.0.0.1" # 主机名
YIAPI_DB_NAME="test" # 数据库名称
YIAPI_DB_USER="root" # 用户名
YIAPI_DB_PASS="root" # 用户密码
YIAPI_DB_PORT=3306 # 监听端口
# redis 配置
YIAPI_REDIS_HOST="127.0.0.1" # 主机地址
YIAPI_REDIS_PORT=6379 # 端口
YIAPI_REDIS_USER="" # 用户名
YIAPI_REDIS_PASS="" # 密码
YIAPI_REDIS_PREFIX="test:" # 前缀
YIAPI_REDIS_EX=86400 # 过期时间
YIAPI_REDIS_DB=0 # 使用哪一个库
# jwt 配置
YIAPI_JWT_SECRET="test" # 密钥（正式使用请修改此值）
YIAPI_JWT_EXPIRES_IN="7d" # jwt令牌过期时间
# 上传配置 为空上传到 public 目录
YIAPI_UPLOAD_DIR="./public/static" # 文件保存目录
# 支付回调地址
YIAPI_WEPAY_NOTIFY_URL="https://test.com/api/weixin/payNotify" # 支付回调通知地址
```

1. 确保已经启动了 `mysql` 和 `redis`。
2. 在 `env/.env.development` 文件中配置好 `mysql`和 `redis` 的连接参数。
3. 执行 `pnpm run dev` 运行接口。
4. 浏览器访问 `http://127.0.0.1:3000`。

接口启动成功信息

![随易科技](https://static.yicode.tech/images/202306/20230615215945.png)
